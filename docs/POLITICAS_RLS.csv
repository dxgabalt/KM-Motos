TABLA,POLITICA,OPERACION,CONDICION,DESCRIPCION,ESTADO
profiles,Users can read own profile,SELECT,auth.uid() = id,"Los usuarios solo pueden leer su propio perfil",COMPLETADO
profiles,Users can update own profile,UPDATE,auth.uid() = id,"Los usuarios solo pueden actualizar su propio perfil",COMPLETADO
profiles,Users can insert own profile,INSERT,auth.uid() = id,"Los usuarios solo pueden crear su propio perfil",COMPLETADO

addresses,Users can manage own addresses,ALL,auth.uid() = user_id,"Los usuarios solo pueden gestionar sus propias direcciones",COMPLETADO

orders,Users can manage own orders,ALL,auth.uid() = user_id,"Los usuarios solo pueden ver y gestionar sus propios pedidos",COMPLETADO

product_reviews,Anyone can read reviews,SELECT,true,"Cualquiera puede leer las reseñas de productos",COMPLETADO
product_reviews,Users can manage own reviews,"INSERT, UPDATE, DELETE",auth.uid() = user_id,"Los usuarios solo pueden gestionar sus propias reseñas",COMPLETADO

wholesaler_requests,Users can manage own requests,ALL,auth.uid() = user_id,"Los usuarios solo pueden gestionar sus propias solicitudes mayoristas",COMPLETADO

payment_methods,Users can manage own payment methods,ALL,auth.uid() = user_id,"Los usuarios solo pueden gestionar sus propios métodos de pago",COMPLETADO

support_tickets,Users can manage own tickets,ALL,auth.uid() = user_id,"Los usuarios solo pueden gestionar sus propios tickets de soporte",COMPLETADO

stores,Anyone can read active stores,SELECT,is_active = true,"Cualquiera puede leer las tiendas activas",COMPLETADO

delivery_options,Anyone can read active options,SELECT,is_active = true,"Cualquiera puede leer las opciones de entrega activas",COMPLETADO

coupons,Anyone can read active coupons,SELECT,"is_active = true AND (valid_until IS NULL OR valid_until > now())","Cualquiera puede leer cupones activos y vigentes",COMPLETADO

categories,Anyone can read categories,SELECT,true,"Cualquiera puede leer las categorías",COMPLETADO

brands,Anyone can read brands,SELECT,true,"Cualquiera puede leer las marcas",COMPLETADO

products,Anyone can read products,SELECT,true,"Cualquiera puede leer los productos",COMPLETADO

wholesaler_pricing,Anyone can read wholesaler pricing,SELECT,true,"Cualquiera puede leer los precios mayoristas",COMPLETADO

clients,Sales advisors can manage assigned clients,ALL,"auth.uid() = sales_advisor_id OR auth.jwt() ->> 'role' = 'admin'","Los asesores pueden gestionar sus clientes asignados",PENDIENTE

order_items,Users can read own order items,SELECT,"EXISTS (SELECT 1 FROM orders WHERE orders.id = order_items.order_id AND orders.user_id = auth.uid())","Los usuarios pueden leer los items de sus propios pedidos",PENDIENTE

notifications,Users can read own notifications,SELECT,auth.uid() = user_id,"Los usuarios solo pueden leer sus propias notificaciones",PENDIENTE

audit_logs,Admins can read all audit logs,SELECT,"auth.jwt() ->> 'role' = 'admin'","Solo los administradores pueden leer los logs de auditoría",PENDIENTE

inventory_movements,Staff can read inventory movements,SELECT,"auth.jwt() ->> 'role' IN ('admin', 'staff')","Solo el personal puede leer movimientos de inventario",PENDIENTE