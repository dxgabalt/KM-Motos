FUNCION,PARAMETROS,RETORNO,DESCRIPCION,ESTADO,CASOS_USO
search_products,"search_query TEXT, category_filter UUID, brand_filter UUID, min_price DECIMAL, max_price DECIMAL, sort_by TEXT, sort_order TEXT, page_limit INTEGER, page_offset INTEGER","TABLE (products)","Búsqueda avanzada de productos con filtros múltiples",COMPLETADO,"Búsqueda en app, filtros de categoría/marca/precio"

get_wholesaler_pricing,product_id_param INTEGER,"TABLE (min_quantity INTEGER, unit_price DECIMAL, discount_percentage DECIMAL, total_savings DECIMAL)","Obtener precios mayoristas formateados para un producto",COMPLETADO,"Modal de precios mayoristas, cálculo de descuentos"

create_order_with_items,"client_id_param UUID, user_id_param UUID, items JSONB, delivery_address_id_param UUID, delivery_option_id_param UUID, payment_method_param TEXT, coupon_code_param TEXT",UUID,"Crear pedido completo con items y validaciones",COMPLETADO,"Checkout, creación de pedidos, aplicación de cupones"

get_user_orders,user_id_param UUID,"TABLE (orders with item_count)","Obtener historial completo de pedidos de un usuario",COMPLETADO,"Pantalla Mis Pedidos, historial de compras"

validate_coupon,"coupon_code_param TEXT, order_amount DECIMAL","TABLE (is_valid BOOLEAN, discount_type TEXT, discount_value DECIMAL, discount_amount DECIMAL, message TEXT)","Validar cupón con todas las reglas de negocio",COMPLETADO,"Aplicación de cupones en checkout, validación en tiempo real"

update_product_rating,,"TRIGGER FUNCTION","Actualizar automáticamente el rating promedio de productos",COMPLETADO,"Trigger automático al crear/actualizar/eliminar reseñas"

calculate_shipping_cost,"delivery_option_id UUID, destination_address UUID",DECIMAL,"Calcular costo de envío basado en distancia y opción",PENDIENTE,"Checkout, cálculo dinámico de envío"

get_product_recommendations,user_id_param UUID,"TABLE (products)","Obtener recomendaciones personalizadas de productos",PENDIENTE,"Home personalizado, productos sugeridos"

process_wholesaler_approval,request_id UUID,BOOLEAN,"Procesar aprobación de solicitud mayorista",PENDIENTE,"Panel admin, aprobación de mayoristas"

get_inventory_alerts,store_id UUID,"TABLE (products with low_stock)","Obtener productos con stock bajo",PENDIENTE,"Alertas de inventario, reposición"

calculate_loyalty_points,"user_id UUID, order_amount DECIMAL",INTEGER,"Calcular puntos de lealtad por compra",PENDIENTE,"Sistema de puntos, gamificación"

get_sales_analytics,"date_from DATE, date_to DATE","TABLE (analytics)","Obtener métricas de ventas por período",PENDIENTE,"Dashboard admin, reportes de ventas"

apply_bulk_discount,"product_ids INTEGER[], discount_percentage DECIMAL",BOOLEAN,"Aplicar descuento masivo a productos",PENDIENTE,"Promociones masivas, ofertas especiales"

get_customer_segments,,"TABLE (segments)","Segmentar clientes por comportamiento de compra",PENDIENTE,"Marketing dirigido, análisis de clientes"

process_return_request,"order_id UUID, items JSONB, reason TEXT",UUID,"Procesar solicitud de devolución",PENDIENTE,"Gestión de devoluciones, servicio al cliente"

sync_inventory_external,store_id UUID,BOOLEAN,"Sincronizar inventario con sistema externo",PENDIENTE,"Integración ERP, actualización automática"

generate_invoice,order_id UUID,TEXT,"Generar factura en formato PDF",PENDIENTE,"Facturación automática, documentos legales"

calculate_commission,"advisor_id UUID, period_start DATE, period_end DATE",DECIMAL,"Calcular comisiones de asesores de venta",PENDIENTE,"Sistema de comisiones, pagos a vendedores"

get_trending_products,days_back INTEGER,"TABLE (products with trend_score)","Obtener productos en tendencia",PENDIENTE,"Home dinámico, productos populares"

process_subscription_renewal,user_id UUID,BOOLEAN,"Procesar renovación de suscripción mayorista",PENDIENTE,"Suscripciones automáticas, renovaciones"